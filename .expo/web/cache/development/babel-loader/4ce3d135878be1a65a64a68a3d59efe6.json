{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport * as Notifications from \"expo-notifications\";\nimport { ref, onValue, set, push, remove, off } from \"firebase/database\";\nNotifications.setNotificationHandler({\n  handleNotification: function () {\n    var _handleNotification = _asyncToGenerator(function* () {\n      return {\n        shouldShowAlert: true,\n        shouldPlaySound: true,\n        shouldSetBadge: true\n      };\n    });\n\n    function handleNotification() {\n      return _handleNotification.apply(this, arguments);\n    }\n\n    return handleNotification;\n  }()\n});\nimport { database } from \"../firebase\";\nvar db = database;\n\nvar SendPushNotification = function SendPushNotification(_ref) {\n  var receiverUID = _ref.receiverUID,\n      title_ = _ref.title_,\n      body_ = _ref.body_;\n  onValue(ref(db, \"/users/\" + receiverUID + \"/pushToken\"), function (snapshot) {\n    sendPushNotification(snapshot.val());\n  });\n\n  function sendPushNotification(_x) {\n    return _sendPushNotification.apply(this, arguments);\n  }\n\n  function _sendPushNotification() {\n    _sendPushNotification = _asyncToGenerator(function* (expoPushToken) {\n      var message = {\n        to: expoPushToken,\n        sound: \"default\",\n        title: title_,\n        body: body_,\n        data: {\n          someData: \"goes here\"\n        }\n      };\n      yield fetch(\"https://exp.host/--/api/v2/push/send\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Accept-encoding\": \"gzip, deflate\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(message)\n      });\n    });\n    return _sendPushNotification.apply(this, arguments);\n  }\n};\n\nexport default SendPushNotification;","map":{"version":3,"names":["Notifications","ref","onValue","set","push","remove","off","setNotificationHandler","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","database","db","SendPushNotification","receiverUID","title_","body_","snapshot","sendPushNotification","val","expoPushToken","message","to","sound","title","body","data","someData","fetch","method","headers","Accept","JSON","stringify"],"sources":["/Users/jeongin/mapsee_2/modules/SendPushNotification.js"],"sourcesContent":["import * as Notifications from \"expo-notifications\";\nimport { ref, onValue, set, push, remove, off } from \"firebase/database\";\n\nNotifications.setNotificationHandler({\n  handleNotification: async () => ({\n    shouldShowAlert: true,\n    shouldPlaySound: true,\n    shouldSetBadge: true,\n  }),\n});\n\nimport { database } from \"../firebase\";\nconst db = database;\n\nconst SendPushNotification = ({ receiverUID, title_, body_ }) => {\n  onValue(ref(db, \"/users/\" + receiverUID + \"/pushToken\"), (snapshot) => {\n    sendPushNotification(snapshot.val());\n  });\n\n  async function sendPushNotification(expoPushToken) {\n    const message = {\n      to: expoPushToken,\n      sound: \"default\",\n      title: title_,\n      body: body_,\n      data: { someData: \"goes here\" },\n    };\n\n    await fetch(\"https://exp.host/--/api/v2/push/send\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Accept-encoding\": \"gzip, deflate\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(message),\n    });\n  }\n};\n\nexport default SendPushNotification;\n"],"mappings":";AAAA,OAAO,KAAKA,aAAZ,MAA+B,oBAA/B;AACA,SAASC,GAAT,EAAcC,OAAd,EAAuBC,GAAvB,EAA4BC,IAA5B,EAAkCC,MAAlC,EAA0CC,GAA1C,QAAqD,mBAArD;AAEAN,aAAa,CAACO,sBAAd,CAAqC;EACnCC,kBAAkB;IAAA,4CAAE;MAAA,OAAa;QAC/BC,eAAe,EAAE,IADc;QAE/BC,eAAe,EAAE,IAFc;QAG/BC,cAAc,EAAE;MAHe,CAAb;IAAA,CAAF;;IAAA;MAAA;IAAA;;IAAA;EAAA;AADiB,CAArC;AAQA,SAASC,QAAT;AACA,IAAMC,EAAE,GAAGD,QAAX;;AAEA,IAAME,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAoC;EAAA,IAAjCC,WAAiC,QAAjCA,WAAiC;EAAA,IAApBC,MAAoB,QAApBA,MAAoB;EAAA,IAAZC,KAAY,QAAZA,KAAY;EAC/Df,OAAO,CAACD,GAAG,CAACY,EAAD,EAAK,YAAYE,WAAZ,GAA0B,YAA/B,CAAJ,EAAkD,UAACG,QAAD,EAAc;IACrEC,oBAAoB,CAACD,QAAQ,CAACE,GAAT,EAAD,CAApB;EACD,CAFM,CAAP;;EAD+D,SAKhDD,oBALgD;IAAA;EAAA;;EAAA;IAAA,0CAK/D,WAAoCE,aAApC,EAAmD;MACjD,IAAMC,OAAO,GAAG;QACdC,EAAE,EAAEF,aADU;QAEdG,KAAK,EAAE,SAFO;QAGdC,KAAK,EAAET,MAHO;QAIdU,IAAI,EAAET,KAJQ;QAKdU,IAAI,EAAE;UAAEC,QAAQ,EAAE;QAAZ;MALQ,CAAhB;MAQA,MAAMC,KAAK,CAAC,sCAAD,EAAyC;QAClDC,MAAM,EAAE,MAD0C;QAElDC,OAAO,EAAE;UACPC,MAAM,EAAE,kBADD;UAEP,mBAAmB,eAFZ;UAGP,gBAAgB;QAHT,CAFyC;QAOlDN,IAAI,EAAEO,IAAI,CAACC,SAAL,CAAeZ,OAAf;MAP4C,CAAzC,CAAX;IASD,CAvB8D;IAAA;EAAA;AAwBhE,CAxBD;;AA0BA,eAAeR,oBAAf"},"metadata":{},"sourceType":"module"}