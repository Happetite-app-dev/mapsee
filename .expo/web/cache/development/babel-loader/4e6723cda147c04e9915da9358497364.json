{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { onValue, ref } from \"@firebase/database\";\nimport { useEffect, useState } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { database } from \"../firebase\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar db = database;\n\nvar gotoSingleFolderScreen = function gotoSingleFolderScreen(_ref) {\n  var navigation = _ref.navigation,\n      folderID = _ref.folderID,\n      folderColor = _ref.folderColor,\n      folderUserIDs = _ref.folderUserIDs,\n      myUID = _ref.myUID,\n      recordDataSource = _ref.recordDataSource,\n      setRecordDataSource = _ref.setRecordDataSource,\n      folderName = _ref.folderName;\n  onValue(ref(db, \"/folders/\" + folderID), function (snapshot) {\n    if (snapshot.child(\"userIDs\").val() && myUID in snapshot.child(\"userIDs\").val()) {\n      if (snapshot.child(\"placeRecords\").val() != (null || undefined)) {\n        Object.values(snapshot.child(\"placeRecords\").val()).map(function (recordIDObject) {\n          Object.keys(recordIDObject).map(function (recordID) {\n            onValue(ref(db, \"/records/\" + recordID), function (snapshot2) {\n              if (snapshot2.val() != (null || undefined)) {\n                setRecordDataSource(function (prev) {\n                  return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, recordID, {\n                    recordID: recordID,\n                    recordData: snapshot2.val()\n                  }));\n                });\n              }\n            });\n          });\n        });\n      }\n    }\n  });\n  navigation.navigate(\"SingleFolderScreen\", {\n    recordDataSource: recordDataSource,\n    folderID: folderID,\n    folderName: folderName,\n    folderColor: folderColor,\n    folderUserIDs: folderUserIDs\n  });\n};\n\nvar ReceptFolderInviteRequestList = function ReceptFolderInviteRequestList(_ref2) {\n  var requesterObject = _ref2.requesterObject,\n      folderObject = _ref2.folderObject,\n      folderID = _ref2.folderID,\n      navigation = _ref2.navigation,\n      myUID = _ref2.myUID;\n\n  var _useState = useState(requesterObject || {\n    id: \"\",\n    firstName: \"\",\n    lastName: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      requesterObj = _useState2[0],\n      setRequesterObj = _useState2[1];\n\n  useEffect(function () {\n    if (requesterObject != undefined) {\n      setRequesterObj(requesterObject);\n    }\n  }, [requesterObject]);\n  var requesterID = JSON.stringify(requesterObj.id).slice(1, -1);\n  var requesterFirstName = JSON.stringify(requesterObj.firstName).slice(1, -1);\n  var requesterLastName = JSON.stringify(requesterObj.lastName).slice(1, -1);\n\n  var _useState3 = useState(folderObject || {\n    folderName: \"\",\n    folderColor: \"\",\n    folderUserIDs: []\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      folderObj = _useState4[0],\n      setFolderObj = _useState4[1];\n\n  useEffect(function () {\n    if (folderObject != undefined) {\n      setFolderObj(folderObject);\n    }\n  }, [folderObject]);\n  var folderName = JSON.stringify(folderObj.folderName).slice(1, -1);\n  var folderColor = JSON.stringify(folderObj.folderColor).slice(1, -1);\n  var folderUserIDs = folderObj.folderUserIDs;\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      recordDataSource = _useState6[0],\n      setRecordDataSource = _useState6[1];\n\n  if (folderObj == {\n    folderName: \"\",\n    folderColor: \"\",\n    folderUserIDs: []\n  }) {\n    return _jsx(_Fragment, {});\n  } else {\n    return _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        gotoSingleFolderScreen({\n          navigation: navigation,\n          folderID: folderID,\n          folderColor: folderColor,\n          folderUserIDs: folderUserIDs,\n          myUID: myUID,\n          recordDataSource: recordDataSource,\n          setRecordDataSource: setRecordDataSource,\n          folderName: folderName\n        });\n      },\n      style: {\n        flex: 1,\n        alignItems: \"center\",\n        marginBottom: 40\n      },\n      children: _jsx(View, {\n        style: {\n          width: 344,\n          height: 24,\n          borderRadius: 16,\n          flexDirection: \"row\"\n        },\n        children: _jsxs(Text, {\n          style: {\n            left: 16,\n            top: 5,\n            fontWeight: \"400\",\n            fontSize: 14,\n            lineHeight: 16,\n            letterSpacing: -0.5\n          },\n          children: [_jsxs(Text, {\n            style: {\n              fontWeight: \"700\"\n            },\n            children: [requesterLastName, requesterFirstName, \"(@\", requesterID, \")\"]\n          }), \"\\uB2D8\\uC758\", _jsxs(Text, {\n            style: {\n              fontWeight: \"700\"\n            },\n            children: [\" \", folderName, \" \"]\n          }), \"\\uCD08\\uB300\\uB97C \\uC218\\uB77D\\uD588\\uC2B5\\uB2C8\\uB2E4.\"]\n        })\n      })\n    });\n  }\n};\n\nexport default ReceptFolderInviteRequestList;","map":{"version":3,"names":["onValue","ref","useEffect","useState","database","db","gotoSingleFolderScreen","navigation","folderID","folderColor","folderUserIDs","myUID","recordDataSource","setRecordDataSource","folderName","snapshot","child","val","undefined","Object","values","map","recordIDObject","keys","recordID","snapshot2","prev","recordData","navigate","ReceptFolderInviteRequestList","requesterObject","folderObject","id","firstName","lastName","requesterObj","setRequesterObj","requesterID","JSON","stringify","slice","requesterFirstName","requesterLastName","folderObj","setFolderObj","flex","alignItems","marginBottom","width","height","borderRadius","flexDirection","left","top","fontWeight","fontSize","lineHeight","letterSpacing"],"sources":["/Users/jeongin/mapsee_2/components/ReceptFolderInviteRequestList.js"],"sourcesContent":["import { onValue, ref } from \"@firebase/database\";\nimport { useEffect, useState } from \"react\";\nimport { Text, View, TouchableOpacity } from \"react-native\";\n\nimport { database } from \"../firebase\";\nconst db = database;\nconst gotoSingleFolderScreen = ({\n  navigation,\n  folderID,\n  folderColor,\n  folderUserIDs,\n  myUID,\n  recordDataSource,\n  setRecordDataSource,\n  folderName,\n}) => {\n  onValue(ref(db, \"/folders/\" + folderID), (snapshot) => {\n    //폴더 삭제 시 삭제된 폴더가 display되는 오류 방지를 위한 체크용 코드\n    if (\n      snapshot.child(\"userIDs\").val() &&\n      myUID in snapshot.child(\"userIDs\").val()\n    ) {\n      if (snapshot.child(\"placeRecords\").val() != (null || undefined)) {\n        //폴더는 있지만 빈폴더라서 record가 안에 없을 수 있어!!\n        //recordIDList_.push(...Object.keys(snapshot2.child('placeRecords').val()))  //해당 user가 소속된 각 폴더에 들어있는 recordIDList들을 합쳐서 하나로 만들어주기(버림)\n        Object.values(snapshot.child(\"placeRecords\").val()).map(\n          (recordIDObject) => {\n            //folders의 placeRecord 속에 있는 각 placeID에 대응되는 recordIDObject들에 대하여....\n            Object.keys(recordIDObject).map((recordID) => {\n              //각 recordObject에 있는 recordID에 대하여\n              onValue(ref(db, \"/records/\" + recordID), (snapshot2) => {\n                if (snapshot2.val() != (null || undefined)) {\n                  //masterDataSource 채워주기 --> 기존 record를 지웠을 때, 없는 recordID를 찾아서 null이 masterDataSource에 들어가는 경우를 방지하고자 함\n                  setRecordDataSource((prev) => ({\n                    ...prev,\n                    [recordID]: {\n                      recordID,\n                      recordData: snapshot2.val(),\n                    },\n                  })); //{recordID: recordID, recordData:{title: ~~, date: ~~, lctn: ~~, text: ~~, placeName: ~~}}가 쌓여있음\n                }\n              });\n            });\n          }\n        );\n      }\n    }\n  });\n  navigation.navigate(\"SingleFolderScreen\", {\n    //나중에 folderID, userID만 있으면 그 외 나머지 정보들을 불러오는 모듈을 만들 필요가 있음\n    recordDataSource,\n    folderID,\n    folderName,\n    folderColor,\n    folderUserIDs,\n  });\n};\nconst ReceptFolderInviteRequestList = ({\n  requesterObject,\n  folderObject,\n  folderID,\n  navigation,\n  myUID,\n}) => {\n  const [requesterObj, setRequesterObj] = useState(\n    requesterObject || { id: \"\", firstName: \"\", lastName: \"\" }\n  );\n  useEffect(() => {\n    if (requesterObject != undefined) {\n      setRequesterObj(requesterObject);\n    }\n  }, [requesterObject]);\n  const requesterID = JSON.stringify(requesterObj.id).slice(1, -1);\n  const requesterFirstName = JSON.stringify(requesterObj.firstName).slice(\n    1,\n    -1\n  );\n  const requesterLastName = JSON.stringify(requesterObj.lastName).slice(1, -1);\n  const [folderObj, setFolderObj] = useState(\n    folderObject || { folderName: \"\", folderColor: \"\", folderUserIDs: [] }\n  );\n  useEffect(() => {\n    if (folderObject != undefined) {\n      setFolderObj(folderObject);\n    }\n  }, [folderObject]);\n  const folderName = JSON.stringify(folderObj.folderName).slice(1, -1);\n  const folderColor = JSON.stringify(folderObj.folderColor).slice(1, -1);\n  const folderUserIDs = folderObj.folderUserIDs;\n  const [recordDataSource, setRecordDataSource] = useState({});\n  if (folderObj == { folderName: \"\", folderColor: \"\", folderUserIDs: [] }) {\n    return <></>;\n  } else {\n    return (\n      <TouchableOpacity\n        onPress={() => {\n          gotoSingleFolderScreen({\n            navigation,\n            folderID,\n            folderColor,\n            folderUserIDs,\n            myUID,\n            recordDataSource,\n            setRecordDataSource,\n            folderName,\n          });\n        }}\n        style={{ flex: 1, alignItems: \"center\", marginBottom: 40 }}\n      >\n        <View\n          style={{\n            width: 344,\n            height: 24,\n            borderRadius: 16,\n            flexDirection: \"row\",\n          }}\n        >\n          <Text\n            style={{\n              left: 16,\n              top: 5,\n              fontWeight: \"400\",\n              fontSize: 14,\n              lineHeight: 16,\n              letterSpacing: -0.5,\n            }}\n          >\n            <Text style={{ fontWeight: \"700\" }}>\n              {requesterLastName}\n              {requesterFirstName}(@{requesterID})\n            </Text>\n            님의\n            <Text style={{ fontWeight: \"700\" }}> {folderName} </Text>\n            초대를 수락했습니다.\n          </Text>\n        </View>\n      </TouchableOpacity>\n    );\n  }\n};\n\nexport default ReceptFolderInviteRequestList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}